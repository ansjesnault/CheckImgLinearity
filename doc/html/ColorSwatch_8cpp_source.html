<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>CheckImgLinearity: src/ColorSwatch.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CheckImgLinearity
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ColorSwatch_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ColorSwatch.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="ColorSwatch_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ColorSwatch_8h.html">ColorSwatch.h</a>&quot;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PreBuildUtil_8h.html">PreBuildUtil.h</a>&quot;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ColorSwatchPatch_8h.html">ColorSwatchPatch.h</a>&quot;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MunsellColor_8h.html">MunsellColor.h</a>&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ImagePlugin_8h.html">ImagePlugin.h</a>&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ColorSwatchMask_8h.html">ColorSwatchMask.h</a>&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;QSettings&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;QDir&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;QFile&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;QImage&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;QColor&gt;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;QVector&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;QMap&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span>       <span class="comment">// shared_ptr ...</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;stdexcept&gt;</span>    <span class="comment">// exceptions ...</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span>      <span class="comment">// stringstream ...</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span>    <span class="comment">// std::sort ...</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="classColorSwatch_1_1Private.html">   23</a></span>&#160;<span class="keyword">class </span><a class="code" href="classColorSwatch_1_1Private.html">ColorSwatch::Private</a></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;{</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="classColorSwatch_1_1Private.html#a80d15aede5b8ee246a5519b39c414377">   26</a></span>&#160;    QString <a class="code" href="classColorSwatch_1_1Private.html#a80d15aede5b8ee246a5519b39c414377">mRawFile</a>;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">   28</a></span>&#160;    std::shared_ptr&lt;ColorSwatchMask&gt;    <a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>;</div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="classColorSwatch_1_1Private.html#a7f14ecce9c122121c1d58363f5b68908">   29</a></span>&#160;    QVector&lt;ColorSwatchPatch*&gt;          <a class="code" href="classColorSwatch_1_1Private.html#a7f14ecce9c122121c1d58363f5b68908">mPatchesList</a>;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="classColorSwatch_1_1Private.html#a66560092d86501dcf7461e67e3c37fe2">   31</a></span>&#160;    <a class="code" href="classImagePlugin.html">ImagePlugin</a>* <a class="code" href="classColorSwatch_1_1Private.html#a66560092d86501dcf7461e67e3c37fe2">mImgPlg</a>; <span class="comment">// not owned by this class</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;};</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">//---------------------------------------------------------------------</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">//---------------------------------------------------------------------</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="classColorSwatch.html#a99543e79e6179c547f7ab71dd0bc81cb">   37</a></span>&#160;<a class="code" href="classColorSwatch.html#a99543e79e6179c547f7ab71dd0bc81cb">ColorSwatch::ColorSwatch</a>(<a class="code" href="classImagePlugin.html">ImagePlugin</a>* imgPlg) : d(new <a class="code" href="classColorSwatch_1_1Private.html">Private</a>)</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;{</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a66560092d86501dcf7461e67e3c37fe2">mImgPlg</a>  = imgPlg;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;}</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="classColorSwatch.html#abe110ba67861e60d202c07eecc307e4e">   42</a></span>&#160;<a class="code" href="classColorSwatch.html#abe110ba67861e60d202c07eecc307e4e">ColorSwatch::~ColorSwatch</a>()</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;{</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a7f14ecce9c122121c1d58363f5b68908">mPatchesList</a>.clear();</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keyword">delete</span> <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;}</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">//---------------------------------------------------------------------</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="classColorSwatch.html#a09b91e4e7f7dd144bbbbacab667d1753">   50</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classColorSwatch.html#a09b91e4e7f7dd144bbbbacab667d1753">ColorSwatch::loadSettings</a>(QString iniFile)</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;{</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordtype">bool</span> result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    QSettings settings(iniFile, QSettings::Format::IniFormat);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="comment">// we assume iniFile is absolute file path</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    QDir iniFilePath(iniFile);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    iniFilePath.cdUp();</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="comment">// Get files </span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a80d15aede5b8ee246a5519b39c414377">mRawFile</a>     = QString();</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    settings.beginGroup(<span class="stringliteral">&quot;colorswatch&quot;</span>);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        QString colorswatchRawfile( settings.value(<span class="stringliteral">&quot;rawfile&quot;</span>).toString() ); <span class="comment">// [MANDATORY]</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="keywordflow">if</span>( !QFile::exists( <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a80d15aede5b8ee246a5519b39c414377">mRawFile</a> = QDir::isRelativePath(colorswatchRawfile) ? iniFilePath.absoluteFilePath(colorswatchRawfile) : colorswatchRawfile ) )</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;[&quot;</span>+<a class="code" href="PreBuildUtil_8h.html#a05b8121ca60daca419c468fa4689549c">FILE_LINE_FUNC_STR</a>+<span class="stringliteral">&quot;] The specified file does not exist : &quot;</span> + <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a80d15aede5b8ee246a5519b39c414377">mRawFile</a>.toStdString() );</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    settings.endGroup();</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="comment">// Load mask info</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>.reset();</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">if</span>(settings.childGroups().contains(<span class="stringliteral">&quot;mask&quot;</span>))  <span class="comment">// [OPTIONAL]</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        settings.beginGroup(<span class="stringliteral">&quot;mask&quot;</span>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        QString maskFile( settings.value(<span class="stringliteral">&quot;file&quot;</span>).toString() ); <span class="comment">// [MANDATORY  if mask section set]</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="keywordflow">if</span>( !QFile::exists( maskFile = QDir::isRelativePath(maskFile) ? iniFilePath.absoluteFilePath(maskFile) : maskFile ) )</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;[&quot;</span>+<a class="code" href="PreBuildUtil_8h.html#a05b8121ca60daca419c468fa4689549c">FILE_LINE_FUNC_STR</a>+<span class="stringliteral">&quot;] The specified file does not exist : &quot;</span> + maskFile.toStdString() );</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        }</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>.reset(<span class="keyword">new</span> <a class="code" href="classColorSwatchMask.html">ColorSwatchMask</a>(maskFile) );</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keywordflow">if</span>(settings.childKeys().contains(<span class="stringliteral">&quot;backgroundcolor&quot;</span>) &amp;&amp; <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>) <span class="comment">// [OPTIONAL]</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            QString colorStr = settings.value(<span class="stringliteral">&quot;backgroundcolor&quot;</span>).toString();</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            QColor bgColor( colorStr );</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <span class="keywordflow">if</span>(!bgColor.isValid())</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;[&quot;</span>+<a class="code" href="PreBuildUtil_8h.html#a05b8121ca60daca419c468fa4689549c">FILE_LINE_FUNC_STR</a>+<span class="stringliteral">&quot;] The specified color is invalid : &quot;</span> + colorStr.toStdString() );</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;backgroundColor(bgColor);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keywordflow">if</span>(settings.childKeys().contains(<span class="stringliteral">&quot;applyAlphaMask&quot;</span>) &amp;&amp; <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>) <span class="comment">// [OPTIONAL]</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            QString outApplied = settings.value(<span class="stringliteral">&quot;applyAlphaMask&quot;</span>).toString();</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            <span class="keywordflow">if</span>( outApplied.contains(<span class="stringliteral">&quot;ON&quot;</span>,Qt::CaseInsensitive) || outApplied.contains(<span class="stringliteral">&quot;true&quot;</span>,Qt::CaseInsensitive) || outApplied.contains(<span class="stringliteral">&quot;1&quot;</span>,Qt::CaseInsensitive) )</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;apllyAlphaMask(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>( outApplied.contains(<span class="stringliteral">&quot;OFF&quot;</span>,Qt::CaseInsensitive) || outApplied.contains(<span class="stringliteral">&quot;false&quot;</span>,Qt::CaseInsensitive) || outApplied.contains(<span class="stringliteral">&quot;0&quot;</span>,Qt::CaseInsensitive) )</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;apllyAlphaMask(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;[&quot;</span>+<a class="code" href="PreBuildUtil_8h.html#a05b8121ca60daca419c468fa4689549c">FILE_LINE_FUNC_STR</a>+<span class="stringliteral">&quot;] cannot read &#39;outputApplied&#39;(=&quot;</span>+outApplied.toStdString()+<span class="stringliteral">&quot;). Values could be ON|on|true|TRUE|1|OFF|off|false|FALSE|0&quot;</span>);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        }</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">if</span>(settings.childKeys().contains(<span class="stringliteral">&quot;outputApplied&quot;</span>) &amp;&amp; <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>) <span class="comment">// [OPTIONAL]</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            QString outApplied = settings.value(<span class="stringliteral">&quot;outputApplied&quot;</span>).toString();</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <span class="keywordflow">if</span>( outApplied.contains(<span class="stringliteral">&quot;ON&quot;</span>,Qt::CaseInsensitive) || outApplied.contains(<span class="stringliteral">&quot;true&quot;</span>,Qt::CaseInsensitive) || outApplied.contains(<span class="stringliteral">&quot;1&quot;</span>,Qt::CaseInsensitive) )</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;outputAplliedMask(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>( outApplied.contains(<span class="stringliteral">&quot;OFF&quot;</span>,Qt::CaseInsensitive) || outApplied.contains(<span class="stringliteral">&quot;false&quot;</span>,Qt::CaseInsensitive) || outApplied.contains(<span class="stringliteral">&quot;0&quot;</span>,Qt::CaseInsensitive) )</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;outputAplliedMask(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;[&quot;</span>+<a class="code" href="PreBuildUtil_8h.html#a05b8121ca60daca419c468fa4689549c">FILE_LINE_FUNC_STR</a>+<span class="stringliteral">&quot;] cannot read &#39;outputApplied&#39;(=&quot;</span>+outApplied.toStdString()+<span class="stringliteral">&quot;). Values could be ON|on|true|TRUE|1|OFF|off|false|FALSE|0&quot;</span>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">if</span>(settings.childKeys().contains(<span class="stringliteral">&quot;outputPatches&quot;</span>) &amp;&amp; <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>) <span class="comment">// [OPTIONAL]</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            QString outApplied = settings.value(<span class="stringliteral">&quot;outputPatches&quot;</span>).toString();</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <span class="keywordflow">if</span>( outApplied.contains(<span class="stringliteral">&quot;ON&quot;</span>,Qt::CaseInsensitive) || outApplied.contains(<span class="stringliteral">&quot;true&quot;</span>,Qt::CaseInsensitive) || outApplied.contains(<span class="stringliteral">&quot;1&quot;</span>,Qt::CaseInsensitive) )</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;outputPatches(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>( outApplied.contains(<span class="stringliteral">&quot;OFF&quot;</span>,Qt::CaseInsensitive) || outApplied.contains(<span class="stringliteral">&quot;false&quot;</span>,Qt::CaseInsensitive) || outApplied.contains(<span class="stringliteral">&quot;0&quot;</span>,Qt::CaseInsensitive) )</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;outputPatches(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;[&quot;</span>+<a class="code" href="PreBuildUtil_8h.html#a05b8121ca60daca419c468fa4689549c">FILE_LINE_FUNC_STR</a>+<span class="stringliteral">&quot;] cannot read &#39;outputApplied&#39;(=&quot;</span>+outApplied.toStdString()+<span class="stringliteral">&quot;). Values could be ON|on|true|TRUE|1|OFF|off|false|FALSE|0&quot;</span>);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        settings.endGroup();</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">// Load all patches info, strip by strip</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a7f14ecce9c122121c1d58363f5b68908">mPatchesList</a>.clear();</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    QVector&lt;QVariant&gt; reflectanceList;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    QStringList     isccnbsList;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1; i &lt;= settings.childGroups().filter(<span class="stringliteral">&quot;strip&quot;</span>).size(); i++)</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        settings.beginGroup(QString(<span class="stringliteral">&quot;strip:%1&quot;</span>).arg(i));</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            reflectanceList = settings.value(<span class="stringliteral">&quot;reflectances&quot;</span>).toList().toVector(); <span class="comment">// [MANDATORY if strip section set]</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            <span class="keywordflow">if</span>(settings.childKeys().contains(<span class="stringliteral">&quot;ISCCNBS&quot;</span>)) <span class="comment">// [OPTIONAL]</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                isccnbsList = settings.value(<span class="stringliteral">&quot;ISCCNBS&quot;</span>).toStringList();</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                <span class="keywordflow">if</span>(reflectanceList.size() != isccnbsList.size())</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;[&quot;</span>+<a class="code" href="PreBuildUtil_8h.html#a05b8121ca60daca419c468fa4689549c">FILE_LINE_FUNC_STR</a>+<span class="stringliteral">&quot;] &quot;</span>+QString(<span class="stringliteral">&quot;strip:%1&quot;</span>).arg(i).toStdString()+<span class="stringliteral">&quot; section have not same reflectances and ISCC–NBS number count.&quot;</span>);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                    result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        settings.endGroup();</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordtype">int</span> j = 0;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordflow">for</span>(QVariant db : reflectanceList)</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a7f14ecce9c122121c1d58363f5b68908">mPatchesList</a>.append( <span class="keyword">new</span> <a class="code" href="classColorSwatchPatch.html">ColorSwatchPatch</a>(db.toDouble()) );</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <span class="keywordflow">if</span>( isccnbsList.size()-j &gt; 0 )</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a7f14ecce9c122121c1d58363f5b68908">mPatchesList</a>.last()-&gt;setMunsellColor( <span class="keyword">new</span> <a class="code" href="classMunsellColor.html">MunsellColor</a>(isccnbsList.at(j++)) ); <span class="comment">// TODO: use QColor HSV </span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;[&quot;</span>+<a class="code" href="PreBuildUtil_8h.html#a05b8121ca60daca419c468fa4689549c">FILE_LINE_FUNC_STR</a>+<span class="stringliteral">&quot;] The ColorSwatchPatch with reflectance [&quot;</span>+QString(<span class="stringliteral">&quot;%1&quot;</span>).arg(db.toDouble()).toStdString()+<span class="stringliteral">&quot;] will not have any MunsellColor.&quot;</span>);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">//---------------------------------------------------------------------</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="classColorSwatch.html#a1f6eaa4d39a2d5cb19ff9628463c63ba">  175</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classColorSwatch.html#a1f6eaa4d39a2d5cb19ff9628463c63ba">ColorSwatch::loadImages</a>()</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;{</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordtype">bool</span> result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="comment">// apply settings by loading images</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a80d15aede5b8ee246a5519b39c414377">mRawFile</a>.isEmpty() )</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keywordflow">if</span>(result = <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a66560092d86501dcf7461e67e3c37fe2">mImgPlg</a>-&gt;<a class="code" href="classImagePlugin.html#a6e2da6e4810ca429ca4f79c921ffb723">loadImage</a>(<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a80d15aede5b8ee246a5519b39c414377">mRawFile</a>))</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>)</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;loadImage() )</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                    QSize img   (<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a66560092d86501dcf7461e67e3c37fe2">mImgPlg</a>-&gt;<a class="code" href="classImagePlugin.html#aff57d3344c138ef736b6158f8f207556">size</a>().width(),            <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a66560092d86501dcf7461e67e3c37fe2">mImgPlg</a>-&gt;<a class="code" href="classImagePlugin.html#aff57d3344c138ef736b6158f8f207556">size</a>().height());</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                    QSize mask  (<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;getImage().size().width(),   <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;getImage().size().height());</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                    <span class="keywordflow">if</span>(img != mask)</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                    {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                        QString imgResl     = QString(<span class="stringliteral">&quot;img(%1,%2)&quot;</span>).arg(img.width()).arg(img.height());</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                        QString imaskResl   = QString(<span class="stringliteral">&quot;mask(%1,%2)&quot;</span>).arg(mask.width()).arg(mask.height());</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                        QString resolComp   = QString(<span class="stringliteral">&quot;%1 vs %2&quot;</span>).arg(imgResl).arg(imaskResl);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                        std::cerr&lt;&lt;resolComp.toStdString()&lt;&lt;std::endl;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                        <span class="keywordflow">throw</span> std::length_error(<span class="stringliteral">&quot;[&quot;</span>+<a class="code" href="PreBuildUtil_8h.html#a05b8121ca60daca419c468fa4689549c">FILE_LINE_FUNC_STR</a>+<span class="stringliteral">&quot;]Image file and mask image haven&#39;t the same size! &quot;</span>);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                    }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span>( result &amp;&amp; <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;apllyAlphaMask() )</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                    {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                        <span class="keywordflow">if</span>(!<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;applyMask( &amp;<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a66560092d86501dcf7461e67e3c37fe2">mImgPlg</a>-&gt;<a class="code" href="classImagePlugin.html#a7d49fe4803d53e8e920866e77d276378">toQImage</a>() ) )</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                        {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                            <a class="code" href="classColorSwatch.html#ad821a5c70f84564bcc5d6aecf0e5b819">writeImage2QImage</a>();</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                            <span class="keywordflow">throw</span> std::logic_error(<span class="stringliteral">&quot;[&quot;</span>+<a class="code" href="PreBuildUtil_8h.html#a05b8121ca60daca419c468fa4689549c">FILE_LINE_FUNC_STR</a>+<span class="stringliteral">&quot;] Mask aplication FAILED...&quot;</span>);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                        }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                            std::cout&lt;&lt;<span class="stringliteral">&quot;Mask loaded and applied it to the image.&quot;</span>&lt;&lt;std::endl;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                    }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                    std::cout&lt;&lt;<span class="stringliteral">&quot;Mask loaded wihtout applying it to the image.&quot;</span>&lt;&lt;std::endl;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;[&quot;</span>+<a class="code" href="PreBuildUtil_8h.html#a05b8121ca60daca419c468fa4689549c">FILE_LINE_FUNC_STR</a>+<span class="stringliteral">&quot;] Mask image cannot be loaded!&quot;</span>);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;[&quot;</span>+<a class="code" href="PreBuildUtil_8h.html#a05b8121ca60daca419c468fa4689549c">FILE_LINE_FUNC_STR</a>+<span class="stringliteral">&quot;] No mask img provided!&quot;</span>);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <span class="keywordflow">throw</span> std::logic_error(<span class="stringliteral">&quot;[&quot;</span>+<a class="code" href="PreBuildUtil_8h.html#a05b8121ca60daca419c468fa4689549c">FILE_LINE_FUNC_STR</a>+<span class="stringliteral">&quot;] Cannot load raw image!&quot;</span>);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;[&quot;</span>+<a class="code" href="PreBuildUtil_8h.html#a05b8121ca60daca419c468fa4689549c">FILE_LINE_FUNC_STR</a>+<span class="stringliteral">&quot;] No raw image filename provided!&quot;</span>);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">if</span>(!result)</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>.reset();</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">//---------------------------------------------------------------------</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="classColorSwatch.html#a73a53261c7d62d5b06fbe3b812e11562">  230</a></span>&#160;QString <a class="code" href="classColorSwatch.html#a73a53261c7d62d5b06fbe3b812e11562">ColorSwatch::rawFilePathName</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a80d15aede5b8ee246a5519b39c414377">mRawFile</a>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="classColorSwatch.html#ae06210c041a1975f6feb729437dec2e0">  235</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classColorSwatch.html#ae06210c041a1975f6feb729437dec2e0">ColorSwatch::haveImage</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a66560092d86501dcf7461e67e3c37fe2">mImgPlg</a>-&gt;<a class="code" href="classImagePlugin.html#a7d49fe4803d53e8e920866e77d276378">toQImage</a>().isNull();</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;}</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="classColorSwatch.html#ace4ab6391be1d3c9d31d350173a74f3d">  240</a></span>&#160;QImage <a class="code" href="classColorSwatch.html#ace4ab6391be1d3c9d31d350173a74f3d">ColorSwatch::getQImage</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a66560092d86501dcf7461e67e3c37fe2">mImgPlg</a>-&gt;<a class="code" href="classImagePlugin.html#a7d49fe4803d53e8e920866e77d276378">toQImage</a>();</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div>
<div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="classColorSwatch.html#a31f5f48f34fb5ef16a750aa37605116f">  245</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classColorSwatch.html#a31f5f48f34fb5ef16a750aa37605116f">ColorSwatch::haveMask</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;}</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="classColorSwatch.html#ab5ea54d8456763b9c70b8648e2968c1b">  250</a></span>&#160;QImage <a class="code" href="classColorSwatch.html#ab5ea54d8456763b9c70b8648e2968c1b">ColorSwatch::getMaskImg</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;getImage();</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="classColorSwatch.html#a60515e5e4126b7c0295c09553ee89816">  255</a></span>&#160;QString <a class="code" href="classColorSwatch.html#a60515e5e4126b7c0295c09553ee89816">ColorSwatch::printPatchesInfo</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    std::stringstream ss;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    ss&lt;&lt;<span class="stringliteral">&quot;[&quot;</span>&lt;&lt;<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a7f14ecce9c122121c1d58363f5b68908">mPatchesList</a>.size()&lt;&lt;<span class="stringliteral">&quot;] Patches:\t\n&quot;</span>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a7f14ecce9c122121c1d58363f5b68908">mPatchesList</a>.size(); i++)</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        ss&lt;&lt;<span class="stringliteral">&quot;\tPatch [&quot;</span>&lt;&lt;i&lt;&lt;<span class="stringliteral">&quot;]:&quot;</span>&lt;&lt; *<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a7f14ecce9c122121c1d58363f5b68908">mPatchesList</a>[i] &lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">return</span> QString(ss.str().c_str());</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;}</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="classColorSwatch.html#ae31fe98a23e2abd07730c1282b106436">  264</a></span>&#160;QString <a class="code" href="classColorSwatch.html#ae31fe98a23e2abd07730c1282b106436">ColorSwatch::printMaskInfo</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    std::stringstream ss;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a> ? ss&lt;&lt;<span class="stringliteral">&quot;[X] Mask :\n&quot;</span>&lt;&lt;*<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>.get() : ss&lt;&lt;<span class="stringliteral">&quot;[-] Mask :\n&quot;</span>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">return</span> QString(ss.str().c_str());</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;}</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">//---------------------------------------------------------------------</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="ColorSwatch_8cpp.html#a415665a7e3d6835e890523eedc1f98d4">  273</a></span>&#160;std::ostream&amp; <a class="code" href="ColorSwatch_8cpp.html#a415665a7e3d6835e890523eedc1f98d4">operator&lt;&lt;</a>(std::ostream&amp; stream, <span class="keyword">const</span> <a class="code" href="classColorSwatch.html">ColorSwatch</a> &amp;colorSwatch)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;{</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">return</span> stream&lt;&lt;<span class="stringliteral">&quot;ColorSwatch:\n&quot;</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        &lt;&lt;<span class="stringliteral">&quot;[&quot;</span>&lt;&lt;(colorSwatch.<a class="code" href="classColorSwatch.html#a73a53261c7d62d5b06fbe3b812e11562">rawFilePathName</a>().isEmpty()?<span class="stringliteral">&quot;-&quot;</span>:<span class="stringliteral">&quot;X&quot;</span>)&lt;&lt;<span class="stringliteral">&quot;] Raw image:\t&quot;</span>          &lt;&lt;colorSwatch.<a class="code" href="classColorSwatch.html#a73a53261c7d62d5b06fbe3b812e11562">rawFilePathName</a>().toStdString()&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        &lt;&lt;colorSwatch.<a class="code" href="classColorSwatch.html#ae31fe98a23e2abd07730c1282b106436">printMaskInfo</a>().toStdString()</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        &lt;&lt;colorSwatch.<a class="code" href="classColorSwatch.html#a60515e5e4126b7c0295c09553ee89816">printPatchesInfo</a>().toStdString();</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">//---------------------------------------------------------------------</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="classColorSwatch.html#adb47c39dba5782e0a6eec846978f4d07">  283</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classColorSwatch.html#adb47c39dba5782e0a6eec846978f4d07">ColorSwatch::fillPatchesPixelsFromMask</a>()</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;{</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordtype">bool</span> result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">throw</span> std::domain_error(<span class="stringliteral">&quot;[&quot;</span>+<a class="code" href="PreBuildUtil_8h.html#a05b8121ca60daca419c468fa4689549c">FILE_LINE_FUNC_STR</a>+<span class="stringliteral">&quot;] Cannot fill patches without a valid loaded mask!&quot;</span>);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="comment">// try to auto detect background color</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    QMap&lt;QRgb, int&gt; clrMap;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> row = 0; row &lt; <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;getImage().height(); row++ )</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> col = 0; col &lt; <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;getImage().width(); col++ )</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;getImage().valid(col,row))</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                clrMap[<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;getImage().pixel(col, row)]++;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordtype">int</span> maxRgbCount = 0;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; rgba : clrMap.keys())</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        maxRgbCount = maxRgbCount &lt; clrMap.value(rgba) ? clrMap.value(rgba) : maxRgbCount;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    QRgb maxRgba = clrMap.key(maxRgbCount);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;haveBackgroundColor() )  </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;backgroundColor( QColor(maxRgba) );</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(QRgb curBgRgba = <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;backgroundColor().rgba() != maxRgba)</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        std::cerr&lt;&lt;<span class="stringliteral">&quot;WARNING: [&quot;</span>+<a class="code" href="PreBuildUtil_8h.html#a05b8121ca60daca419c468fa4689549c">FILE_LINE_FUNC_STR</a>+<span class="stringliteral">&quot;] Dectected background (&quot;</span>&lt;&lt;qRed(maxRgba)&lt;&lt;<span class="stringliteral">&quot;,&quot;</span>&lt;&lt;qGreen(maxRgba)&lt;&lt;<span class="stringliteral">&quot;,&quot;</span>&lt;&lt;qBlue(maxRgba)&lt;&lt;<span class="stringliteral">&quot;,&quot;</span>&lt;&lt;qAlpha(maxRgba)&lt;&lt;<span class="stringliteral">&quot;)&quot;</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                &lt;&lt;<span class="stringliteral">&quot; is not the one provided in settings [default use] (&quot;</span>&lt;&lt;qRed(curBgRgba)&lt;&lt;<span class="stringliteral">&quot;,&quot;</span>&lt;&lt;qGreen(curBgRgba)&lt;&lt;<span class="stringliteral">&quot;,&quot;</span>&lt;&lt;qBlue(curBgRgba)&lt;&lt;<span class="stringliteral">&quot;,&quot;</span>&lt;&lt;qAlpha(curBgRgba)&lt;&lt;<span class="stringliteral">&quot;)&quot;</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                &lt;&lt;std::endl;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="comment">// try to extract sample patches pixels</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keyword">class </span>Patch</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keyword">public</span>:</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        Patch(QImage* img, QRgb av, <span class="keywordtype">int</span> relX, <span class="keywordtype">int</span> relY)</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            : mImg(img), mAverage(av), mRelPixXbegin(relX), mRelPixYbegin(relY)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        {}</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        QImage* mImg;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        QRgb    mAverage;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keywordtype">int</span>     mRelPixXbegin , mRelPixYbegin;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    };</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    QVector&lt;Patch*&gt; patches;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    QRgb            bgRgb = <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;backgroundColor().rgba();</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    QImage          mask = <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;getImage();</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> row = 0; row &lt; mask.height(); row++ )</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> col = 0; col &lt; mask.width(); col++ )</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <span class="keywordflow">if</span>( mask.valid(col, row) )</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                QRgb rgba = mask.pixel(col, row);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                <span class="keywordflow">if</span>( rgba != bgRgb )</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                    <span class="comment">// extract a square region to create patch</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                    <span class="keywordtype">int</span> maxRow = row;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                    <span class="keywordtype">int</span> maxCol = col;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                    <span class="keywordflow">while</span> ( mask.pixel(col      , maxRow) != bgRgb ) { maxRow++; }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                    <span class="keywordflow">while</span> ( mask.pixel(maxCol   , row   ) != bgRgb ) { maxCol++; }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                    QImage* patchImg = <span class="keyword">new</span> QImage( maxCol-col, maxRow-row,QImage::Format_RGB32);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                    <span class="keywordtype">float</span> somRed = 0.0f, somGreen = 0.0f, somBlue = 0.0f, somAlpha = 0.0f;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                    <span class="keywordtype">int</span> nbPixels = 0;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> r=0, localRow = row; localRow &lt; maxRow; localRow++, r++ )</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                    {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> c=0, localCol = col; localCol &lt; maxCol; localCol++, c++ )</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                        {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                            QRgb val = mask.pixel(localCol, localRow);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                            <span class="keywordflow">if</span>( val != bgRgb ) <span class="comment">// in case the mask is not really an aligned square</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                            {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                                <span class="comment">//somRed     += qRed(val);</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                                <span class="comment">//somGreen += qGreen(val);</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                                <span class="comment">//somBlue    += qBlue(val);</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                                <span class="comment">//somAlpha += qAlpha(val);</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                                nbPixels ++;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                                <span class="keywordtype">float</span> pixRed = <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a66560092d86501dcf7461e67e3c37fe2">mImgPlg</a>-&gt;<a class="code" href="classImagePlugin.html#a3f56e1b398dd0b6341730fc3e98e1ecc">readSinglePixelChannel</a>(localCol, localRow, 0);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                                somRed += pixRed;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                                <span class="keywordtype">float</span> pixGreen = <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a66560092d86501dcf7461e67e3c37fe2">mImgPlg</a>-&gt;<a class="code" href="classImagePlugin.html#a3f56e1b398dd0b6341730fc3e98e1ecc">readSinglePixelChannel</a>(localCol, localRow, 1);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                                somGreen += pixGreen;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                                <span class="keywordtype">float</span> pixBlue = <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a66560092d86501dcf7461e67e3c37fe2">mImgPlg</a>-&gt;<a class="code" href="classImagePlugin.html#a3f56e1b398dd0b6341730fc3e98e1ecc">readSinglePixelChannel</a>(localCol, localRow, 2);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                                somBlue += pixBlue; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                                QColor clr;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                                clr.setRedF(pixRed);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                                clr.setGreenF(pixGreen);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                                clr.setBlueF(pixBlue);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                                val = clr.rgb();</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                                patchImg-&gt;setPixel(c,r,val);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                                mask.setPixel(localCol, localRow, bgRgb);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                            }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                        }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                    }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                    QRgb patchRgbaAverage = qRgba((somRed/nbPixels)*255.0f, (somGreen/nbPixels)*255.0f, (somBlue/nbPixels)*255.0f, (somAlpha/nbPixels)*255.0f);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                    patches.push_back( <span class="keyword">new</span> Patch(patchImg, patchRgbaAverage, col, row) );</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                    <span class="comment">// save patch QImage in order of detection</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                    <span class="keywordflow">if</span>(<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;outputPatches())</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                    {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                        QString patchFile = QString(<span class="stringliteral">&quot;patch_%1.png&quot;</span>).arg(i++);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                        patchImg-&gt;save(patchFile);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                        std::cout&lt;&lt;<span class="stringliteral">&quot;Saved patch (in order of detection):&quot;</span>&lt;&lt;patchFile.toStdString()&lt;&lt;<span class="stringliteral">&quot; [&quot;</span>&lt;&lt;patchImg-&gt;width()&lt;&lt;<span class="stringliteral">&quot;x&quot;</span>&lt;&lt;patchImg-&gt;height()&lt;&lt;<span class="stringliteral">&quot;]&quot;</span>&lt;&lt;std::endl;;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                    }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="comment">// try to relie list of the local mask patches with the ColorSwatchPatch list</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    std::sort(patches.begin(), patches.end(), [](Patch* lhs, Patch* rhs) </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="keywordflow">return</span>  ( qRed(lhs-&gt;mAverage) + qGreen(lhs-&gt;mAverage) + qBlue(lhs-&gt;mAverage) + qAlpha(lhs-&gt;mAverage) )</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                    &lt; ( qRed(rhs-&gt;mAverage) + qGreen(rhs-&gt;mAverage) + qBlue(rhs-&gt;mAverage) + qAlpha(rhs-&gt;mAverage) );</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        } ); <span class="comment">// from black (0) to white (255)</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">if</span>(patches.size() != <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a7f14ecce9c122121c1d58363f5b68908">mPatchesList</a>.size())</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <a class="code" href="classColorSwatch.html#ad821a5c70f84564bcc5d6aecf0e5b819">writeImage2QImage</a>();</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keywordflow">throw</span> std::length_error(<span class="stringliteral">&quot;[&quot;</span>+<a class="code" href="PreBuildUtil_8h.html#a05b8121ca60daca419c468fa4689549c">FILE_LINE_FUNC_STR</a>+<span class="stringliteral">&quot;] Detected patches are not equal to number of provided patches reflectance (&quot;</span>+(patches.size() &lt; <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a7f14ecce9c122121c1d58363f5b68908">mPatchesList</a>.size() ? <span class="stringliteral">&quot;&lt;)&quot;</span> : <span class="stringliteral">&quot;&gt;)&quot;</span>) );</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;patches.size(); i++)</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a7f14ecce9c122121c1d58363f5b68908">mPatchesList</a>.size() &gt;= i)</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a7f14ecce9c122121c1d58363f5b68908">mPatchesList</a>[i]-&gt;setImage(patches[i]-&gt;mImg, patches[i]-&gt;mRelPixXbegin, patches[i]-&gt;mRelPixYbegin);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    patches.clear();</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="comment">// compute averages pixels (but this time) using the SDK img provided and directly from the raw img pixels coords</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a66560092d86501dcf7461e67e3c37fe2">mImgPlg</a>)</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="keywordflow">throw</span> std::logic_error(<span class="stringliteral">&quot;[&quot;</span>+<a class="code" href="PreBuildUtil_8h.html#a05b8121ca60daca419c468fa4689549c">FILE_LINE_FUNC_STR</a>+<span class="stringliteral">&quot;] Cannot computeAverageRGBpixel since SDK image is not available!&quot;</span>);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="classColorSwatchPatch.html">ColorSwatchPatch</a>* patch : <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a7f14ecce9c122121c1d58363f5b68908">mPatchesList</a>)</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        patch-&gt;<a class="code" href="classColorSwatchPatch.html#af0351ac712b655cddcb74b5a109e4464">computeAverageRGBpixel</a>(<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a66560092d86501dcf7461e67e3c37fe2">mImgPlg</a>);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">return</span> result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;}</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">//---------------------------------------------------------------------</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno"><a class="line" href="classColorSwatch.html#ad617ab1058c6045f1e44f51943f65ad3">  423</a></span>&#160;<a class="code" href="classColorSwatch.html#a24dda6b820239678e849e6267bd4af41">ColorSwatch::GraphData2D</a> <a class="code" href="classColorSwatch.html#ad617ab1058c6045f1e44f51943f65ad3">ColorSwatch::getGraphData</a>(<a class="code" href="classColorSwatch.html#a5d9282cdf3f64edd007c7f6ac4bc62f9">DATA</a> datalist)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;{</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="classColorSwatch.html#a24dda6b820239678e849e6267bd4af41">GraphData2D</a> data;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">switch</span>(datalist)</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classColorSwatch.html#a5d9282cdf3f64edd007c7f6ac4bc62f9a727e346d3e645e255bb1d17bde1e3256">DATA::REF</a> : <span class="comment">// linearity</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            <span class="comment">// first point (min)</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            data.first.push_back(0);    <span class="comment">//x (reflectance %)</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            data.second.push_back(0);   <span class="comment">//y (float channel average [0-1])</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            <span class="comment">// second point (max)</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            data.first.push_back(100);  <span class="comment">//x (reflectance %)</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            data.second.push_back(1);   <span class="comment">//y (float channel average [0-1])</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classColorSwatch.html#a5d9282cdf3f64edd007c7f6ac4bc62f9ae1e1d3d40573127e9ee0480caf1283d6">DATA::R</a> : <span class="comment">//red channel patches averages</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            <span class="keywordflow">for</span>(<a class="code" href="classColorSwatchPatch.html">ColorSwatchPatch</a>* patch : <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a7f14ecce9c122121c1d58363f5b68908">mPatchesList</a>)</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                data.first.push_back (patch-&gt;<a class="code" href="classColorSwatchPatch.html#a037366f3ab9762eeac4bbd2cc0f8d4bb">getReflectance</a>());</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                data.second.push_back(patch-&gt;<a class="code" href="classColorSwatchPatch.html#aa317904ec85f23561725134bb6002695">getAverageColor</a>().redF());</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classColorSwatch.html#a5d9282cdf3f64edd007c7f6ac4bc62f9adfcf28d0734569a6a693bc8194de62bf">DATA::G</a> : <span class="comment">//green channel patches averages</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            <span class="keywordflow">for</span>(<a class="code" href="classColorSwatchPatch.html">ColorSwatchPatch</a>* patch : <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a7f14ecce9c122121c1d58363f5b68908">mPatchesList</a>)</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                data.first.push_back (patch-&gt;<a class="code" href="classColorSwatchPatch.html#a037366f3ab9762eeac4bbd2cc0f8d4bb">getReflectance</a>());</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                data.second.push_back(patch-&gt;<a class="code" href="classColorSwatchPatch.html#aa317904ec85f23561725134bb6002695">getAverageColor</a>().greenF());</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        }</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classColorSwatch.html#a5d9282cdf3f64edd007c7f6ac4bc62f9a9d5ed678fe57bcca610140957afab571">DATA::B</a> : <span class="comment">//red channel patches averages</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <span class="keywordflow">for</span>(<a class="code" href="classColorSwatchPatch.html">ColorSwatchPatch</a>* patch : <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a7f14ecce9c122121c1d58363f5b68908">mPatchesList</a>)</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                data.first.push_back (patch-&gt;<a class="code" href="classColorSwatchPatch.html#a037366f3ab9762eeac4bbd2cc0f8d4bb">getReflectance</a>());</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                data.second.push_back(patch-&gt;<a class="code" href="classColorSwatchPatch.html#aa317904ec85f23561725134bb6002695">getAverageColor</a>().blueF());</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        }</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classColorSwatch.html#a5d9282cdf3f64edd007c7f6ac4bc62f9a7fc56270e7a70fa81a5935b72eacbe29">DATA::A</a> : <span class="comment">//alpha channel patches averages</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        {</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="keywordflow">for</span>(<a class="code" href="classColorSwatchPatch.html">ColorSwatchPatch</a>* patch : <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a7f14ecce9c122121c1d58363f5b68908">mPatchesList</a>)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                data.first.push_back (patch-&gt;<a class="code" href="classColorSwatchPatch.html#a037366f3ab9762eeac4bbd2cc0f8d4bb">getReflectance</a>());</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                data.second.push_back(patch-&gt;<a class="code" href="classColorSwatchPatch.html#aa317904ec85f23561725134bb6002695">getAverageColor</a>().alphaF());</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">default</span> : <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">return</span> data;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;}</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">//---------------------------------------------------------------------</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div>
<div class="line"><a name="l00481"></a><span class="lineno"><a class="line" href="classColorSwatch.html#ad821a5c70f84564bcc5d6aecf0e5b819">  481</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classColorSwatch.html#ad821a5c70f84564bcc5d6aecf0e5b819">ColorSwatch::writeImage2QImage</a>()</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;{</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="comment">// save/write image mask converted to ARGB32 to help see what happened</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;getImage().isNull())</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        QString maskFile = QString(<span class="stringliteral">&quot;mask_argb32.png&quot;</span>);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;getImage().save(maskFile);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        std::cout&lt;&lt;<span class="stringliteral">&quot;Save &quot;</span>&lt;&lt;maskFile.toStdString()&lt;&lt;<span class="stringliteral">&quot; [&quot;</span>&lt;&lt;<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;getImage().width()&lt;&lt;<span class="stringliteral">&quot;x&quot;</span>&lt;&lt;<a class="code" href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">d</a>-&gt;<a class="code" href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">mMask</a>-&gt;getImage().height()&lt;&lt;<span class="stringliteral">&quot;]&quot;</span>&lt;&lt;std::endl;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    }</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;}</div>
<div class="ttc" id="ImagePlugin_8h_html"><div class="ttname"><a href="ImagePlugin_8h.html">ImagePlugin.h</a></div></div>
<div class="ttc" id="ColorSwatch_8cpp_html_a415665a7e3d6835e890523eedc1f98d4"><div class="ttname"><a href="ColorSwatch_8cpp.html#a415665a7e3d6835e890523eedc1f98d4">operator&lt;&lt;</a></div><div class="ttdeci">std::ostream &amp; operator&lt;&lt;(std::ostream &amp;stream, const ColorSwatch &amp;colorSwatch)</div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8cpp_source.html#l00273">ColorSwatch.cpp:273</a></div></div>
<div class="ttc" id="classImagePlugin_html_a7d49fe4803d53e8e920866e77d276378"><div class="ttname"><a href="classImagePlugin.html#a7d49fe4803d53e8e920866e77d276378">ImagePlugin::toQImage</a></div><div class="ttdeci">virtual QImage toQImage()=0</div><div class="ttdoc">Get a conversion to a QImage (allow to show something into the GUI) </div></div>
<div class="ttc" id="classImagePlugin_html_aff57d3344c138ef736b6158f8f207556"><div class="ttname"><a href="classImagePlugin.html#aff57d3344c138ef736b6158f8f207556">ImagePlugin::size</a></div><div class="ttdeci">virtual QSize size()=0</div><div class="ttdoc">Get the image resolution. </div></div>
<div class="ttc" id="classColorSwatch_1_1Private_html_a66560092d86501dcf7461e67e3c37fe2"><div class="ttname"><a href="classColorSwatch_1_1Private.html#a66560092d86501dcf7461e67e3c37fe2">ColorSwatch::Private::mImgPlg</a></div><div class="ttdeci">ImagePlugin * mImgPlg</div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8cpp_source.html#l00031">ColorSwatch.cpp:31</a></div></div>
<div class="ttc" id="classColorSwatch_1_1Private_html"><div class="ttname"><a href="classColorSwatch_1_1Private.html">ColorSwatch::Private</a></div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8cpp_source.html#l00023">ColorSwatch.cpp:23</a></div></div>
<div class="ttc" id="classColorSwatch_html_a1f6eaa4d39a2d5cb19ff9628463c63ba"><div class="ttname"><a href="classColorSwatch.html#a1f6eaa4d39a2d5cb19ff9628463c63ba">ColorSwatch::loadImages</a></div><div class="ttdeci">bool loadImages()</div><div class="ttdoc">return true or otherwise false and may throw an exception it not only load the image mask filename bu...</div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8cpp_source.html#l00175">ColorSwatch.cpp:175</a></div></div>
<div class="ttc" id="classImagePlugin_html_a3f56e1b398dd0b6341730fc3e98e1ecc"><div class="ttname"><a href="classImagePlugin.html#a3f56e1b398dd0b6341730fc3e98e1ecc">ImagePlugin::readSinglePixelChannel</a></div><div class="ttdeci">virtual float readSinglePixelChannel(int x, int y, int channel)=0</div></div>
<div class="ttc" id="classColorSwatchMask_html"><div class="ttname"><a href="classColorSwatchMask.html">ColorSwatchMask</a></div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatchMask_8h_source.html#l00009">ColorSwatchMask.h:9</a></div></div>
<div class="ttc" id="classColorSwatchPatch_html_a037366f3ab9762eeac4bbd2cc0f8d4bb"><div class="ttname"><a href="classColorSwatchPatch.html#a037366f3ab9762eeac4bbd2cc0f8d4bb">ColorSwatchPatch::getReflectance</a></div><div class="ttdeci">double getReflectance() const </div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatchPatch_8cpp_source.html#l00046">ColorSwatchPatch.cpp:46</a></div></div>
<div class="ttc" id="ColorSwatchMask_8h_html"><div class="ttname"><a href="ColorSwatchMask_8h.html">ColorSwatchMask.h</a></div></div>
<div class="ttc" id="classColorSwatch_html_a5d9282cdf3f64edd007c7f6ac4bc62f9"><div class="ttname"><a href="classColorSwatch.html#a5d9282cdf3f64edd007c7f6ac4bc62f9">ColorSwatch::DATA</a></div><div class="ttdeci">DATA</div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8h_source.html#l00017">ColorSwatch.h:17</a></div></div>
<div class="ttc" id="classColorSwatch_html_ab5ea54d8456763b9c70b8648e2968c1b"><div class="ttname"><a href="classColorSwatch.html#ab5ea54d8456763b9c70b8648e2968c1b">ColorSwatch::getMaskImg</a></div><div class="ttdeci">QImage getMaskImg() const </div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8cpp_source.html#l00250">ColorSwatch.cpp:250</a></div></div>
<div class="ttc" id="classColorSwatch_html_a31f5f48f34fb5ef16a750aa37605116f"><div class="ttname"><a href="classColorSwatch.html#a31f5f48f34fb5ef16a750aa37605116f">ColorSwatch::haveMask</a></div><div class="ttdeci">bool haveMask() const </div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8cpp_source.html#l00245">ColorSwatch.cpp:245</a></div></div>
<div class="ttc" id="classColorSwatchPatch_html"><div class="ttname"><a href="classColorSwatchPatch.html">ColorSwatchPatch</a></div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatchPatch_8h_source.html#l00012">ColorSwatchPatch.h:12</a></div></div>
<div class="ttc" id="classColorSwatchPatch_html_aa317904ec85f23561725134bb6002695"><div class="ttname"><a href="classColorSwatchPatch.html#aa317904ec85f23561725134bb6002695">ColorSwatchPatch::getAverageColor</a></div><div class="ttdeci">QColor getAverageColor() const </div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatchPatch_8cpp_source.html#l00108">ColorSwatchPatch.cpp:108</a></div></div>
<div class="ttc" id="classColorSwatch_html_a60515e5e4126b7c0295c09553ee89816"><div class="ttname"><a href="classColorSwatch.html#a60515e5e4126b7c0295c09553ee89816">ColorSwatch::printPatchesInfo</a></div><div class="ttdeci">QString printPatchesInfo() const </div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8cpp_source.html#l00255">ColorSwatch.cpp:255</a></div></div>
<div class="ttc" id="classImagePlugin_html_a6e2da6e4810ca429ca4f79c921ffb723"><div class="ttname"><a href="classImagePlugin.html#a6e2da6e4810ca429ca4f79c921ffb723">ImagePlugin::loadImage</a></div><div class="ttdeci">virtual bool loadImage(QString filename)=0</div><div class="ttdoc">Load the image in memory for next use. </div></div>
<div class="ttc" id="classColorSwatch_html_a5d9282cdf3f64edd007c7f6ac4bc62f9a727e346d3e645e255bb1d17bde1e3256"><div class="ttname"><a href="classColorSwatch.html#a5d9282cdf3f64edd007c7f6ac4bc62f9a727e346d3e645e255bb1d17bde1e3256">ColorSwatch::DATA::REF</a></div></div>
<div class="ttc" id="classColorSwatch_html_abe110ba67861e60d202c07eecc307e4e"><div class="ttname"><a href="classColorSwatch.html#abe110ba67861e60d202c07eecc307e4e">ColorSwatch::~ColorSwatch</a></div><div class="ttdeci">virtual ~ColorSwatch()</div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8cpp_source.html#l00042">ColorSwatch.cpp:42</a></div></div>
<div class="ttc" id="classColorSwatch_html_ad617ab1058c6045f1e44f51943f65ad3"><div class="ttname"><a href="classColorSwatch.html#ad617ab1058c6045f1e44f51943f65ad3">ColorSwatch::getGraphData</a></div><div class="ttdeci">GraphData2D getGraphData(DATA datalist)</div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8cpp_source.html#l00423">ColorSwatch.cpp:423</a></div></div>
<div class="ttc" id="MunsellColor_8h_html"><div class="ttname"><a href="MunsellColor_8h.html">MunsellColor.h</a></div></div>
<div class="ttc" id="classColorSwatch_html_a09b91e4e7f7dd144bbbbacab667d1753"><div class="ttname"><a href="classColorSwatch.html#a09b91e4e7f7dd144bbbbacab667d1753">ColorSwatch::loadSettings</a></div><div class="ttdeci">bool loadSettings(QString iniFile)</div><div class="ttdoc">return true or otherwise false and may throw an exception some predefined parameters/options are load...</div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8cpp_source.html#l00050">ColorSwatch.cpp:50</a></div></div>
<div class="ttc" id="classColorSwatch_html_a5d9282cdf3f64edd007c7f6ac4bc62f9adfcf28d0734569a6a693bc8194de62bf"><div class="ttname"><a href="classColorSwatch.html#a5d9282cdf3f64edd007c7f6ac4bc62f9adfcf28d0734569a6a693bc8194de62bf">ColorSwatch::DATA::G</a></div></div>
<div class="ttc" id="classColorSwatchPatch_html_af0351ac712b655cddcb74b5a109e4464"><div class="ttname"><a href="classColorSwatchPatch.html#af0351ac712b655cddcb74b5a109e4464">ColorSwatchPatch::computeAverageRGBpixel</a></div><div class="ttdeci">bool computeAverageRGBpixel(ImagePlugin *imgPlg)</div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatchPatch_8cpp_source.html#l00070">ColorSwatchPatch.cpp:70</a></div></div>
<div class="ttc" id="classColorSwatch_html_a5d9282cdf3f64edd007c7f6ac4bc62f9ae1e1d3d40573127e9ee0480caf1283d6"><div class="ttname"><a href="classColorSwatch.html#a5d9282cdf3f64edd007c7f6ac4bc62f9ae1e1d3d40573127e9ee0480caf1283d6">ColorSwatch::DATA::R</a></div></div>
<div class="ttc" id="classColorSwatch_html_adb47c39dba5782e0a6eec846978f4d07"><div class="ttname"><a href="classColorSwatch.html#adb47c39dba5782e0a6eec846978f4d07">ColorSwatch::fillPatchesPixelsFromMask</a></div><div class="ttdeci">bool fillPatchesPixelsFromMask()</div><div class="ttdoc">when mask image loaded, try to extract patches samples (pixel origin, pixels content, channels averages) from defined (or autodetected background) and fill colorSwatchPatch data structure (averages are only used to get the right patches order but since it is computed by Qt, we don&#39;t fill it into colorSwatchPatch) </div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8cpp_source.html#l00283">ColorSwatch.cpp:283</a></div></div>
<div class="ttc" id="PreBuildUtil_8h_html_a05b8121ca60daca419c468fa4689549c"><div class="ttname"><a href="PreBuildUtil_8h.html#a05b8121ca60daca419c468fa4689549c">FILE_LINE_FUNC_STR</a></div><div class="ttdeci">#define FILE_LINE_FUNC_STR</div><div class="ttdef"><b>Definition:</b> <a href="PreBuildUtil_8h_source.html#l00019">PreBuildUtil.h:19</a></div></div>
<div class="ttc" id="ColorSwatchPatch_8h_html"><div class="ttname"><a href="ColorSwatchPatch_8h.html">ColorSwatchPatch.h</a></div></div>
<div class="ttc" id="classColorSwatch_html_a5d9282cdf3f64edd007c7f6ac4bc62f9a9d5ed678fe57bcca610140957afab571"><div class="ttname"><a href="classColorSwatch.html#a5d9282cdf3f64edd007c7f6ac4bc62f9a9d5ed678fe57bcca610140957afab571">ColorSwatch::DATA::B</a></div></div>
<div class="ttc" id="classColorSwatch_html_ae31fe98a23e2abd07730c1282b106436"><div class="ttname"><a href="classColorSwatch.html#ae31fe98a23e2abd07730c1282b106436">ColorSwatch::printMaskInfo</a></div><div class="ttdeci">QString printMaskInfo() const </div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8cpp_source.html#l00264">ColorSwatch.cpp:264</a></div></div>
<div class="ttc" id="classColorSwatch_1_1Private_html_a25584f341eebcbc67ae539a91eb51223"><div class="ttname"><a href="classColorSwatch_1_1Private.html#a25584f341eebcbc67ae539a91eb51223">ColorSwatch::Private::mMask</a></div><div class="ttdeci">std::shared_ptr&lt; ColorSwatchMask &gt; mMask</div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8cpp_source.html#l00028">ColorSwatch.cpp:28</a></div></div>
<div class="ttc" id="classImagePlugin_html"><div class="ttname"><a href="classImagePlugin.html">ImagePlugin</a></div><div class="ttdef"><b>Definition:</b> <a href="ImagePlugin_8h_source.html#l00009">ImagePlugin.h:9</a></div></div>
<div class="ttc" id="PreBuildUtil_8h_html"><div class="ttname"><a href="PreBuildUtil_8h.html">PreBuildUtil.h</a></div></div>
<div class="ttc" id="classMunsellColor_html"><div class="ttname"><a href="classMunsellColor.html">MunsellColor</a></div><div class="ttdoc">http://en.wikipedia.org/wiki/Munsell_color_system </div><div class="ttdef"><b>Definition:</b> <a href="MunsellColor_8h_source.html#l00007">MunsellColor.h:7</a></div></div>
<div class="ttc" id="ColorSwatch_8h_html"><div class="ttname"><a href="ColorSwatch_8h.html">ColorSwatch.h</a></div></div>
<div class="ttc" id="classColorSwatch_html_a99543e79e6179c547f7ab71dd0bc81cb"><div class="ttname"><a href="classColorSwatch.html#a99543e79e6179c547f7ab71dd0bc81cb">ColorSwatch::ColorSwatch</a></div><div class="ttdeci">ColorSwatch(ImagePlugin *imgPlg)</div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8cpp_source.html#l00037">ColorSwatch.cpp:37</a></div></div>
<div class="ttc" id="classColorSwatch_html_ace4ab6391be1d3c9d31d350173a74f3d"><div class="ttname"><a href="classColorSwatch.html#ace4ab6391be1d3c9d31d350173a74f3d">ColorSwatch::getQImage</a></div><div class="ttdeci">QImage getQImage() const </div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8cpp_source.html#l00240">ColorSwatch.cpp:240</a></div></div>
<div class="ttc" id="classColorSwatch_html_ad7c1b7a598c9ff7f9fb6369a1507f3de"><div class="ttname"><a href="classColorSwatch.html#ad7c1b7a598c9ff7f9fb6369a1507f3de">ColorSwatch::d</a></div><div class="ttdeci">Private * d</div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8h_source.html#l00054">ColorSwatch.h:54</a></div></div>
<div class="ttc" id="classColorSwatch_html_a24dda6b820239678e849e6267bd4af41"><div class="ttname"><a href="classColorSwatch.html#a24dda6b820239678e849e6267bd4af41">ColorSwatch::GraphData2D</a></div><div class="ttdeci">QPair&lt; GraphData1D, GraphData1D &gt; GraphData2D</div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8h_source.html#l00016">ColorSwatch.h:16</a></div></div>
<div class="ttc" id="classColorSwatch_1_1Private_html_a7f14ecce9c122121c1d58363f5b68908"><div class="ttname"><a href="classColorSwatch_1_1Private.html#a7f14ecce9c122121c1d58363f5b68908">ColorSwatch::Private::mPatchesList</a></div><div class="ttdeci">QVector&lt; ColorSwatchPatch * &gt; mPatchesList</div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8cpp_source.html#l00029">ColorSwatch.cpp:29</a></div></div>
<div class="ttc" id="classColorSwatch_html"><div class="ttname"><a href="classColorSwatch.html">ColorSwatch</a></div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8h_source.html#l00008">ColorSwatch.h:8</a></div></div>
<div class="ttc" id="classColorSwatch_html_a73a53261c7d62d5b06fbe3b812e11562"><div class="ttname"><a href="classColorSwatch.html#a73a53261c7d62d5b06fbe3b812e11562">ColorSwatch::rawFilePathName</a></div><div class="ttdeci">QString rawFilePathName() const </div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8cpp_source.html#l00230">ColorSwatch.cpp:230</a></div></div>
<div class="ttc" id="classColorSwatch_html_ad821a5c70f84564bcc5d6aecf0e5b819"><div class="ttname"><a href="classColorSwatch.html#ad821a5c70f84564bcc5d6aecf0e5b819">ColorSwatch::writeImage2QImage</a></div><div class="ttdeci">void writeImage2QImage()</div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8cpp_source.html#l00481">ColorSwatch.cpp:481</a></div></div>
<div class="ttc" id="classColorSwatch_html_ae06210c041a1975f6feb729437dec2e0"><div class="ttname"><a href="classColorSwatch.html#ae06210c041a1975f6feb729437dec2e0">ColorSwatch::haveImage</a></div><div class="ttdeci">bool haveImage() const </div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8cpp_source.html#l00235">ColorSwatch.cpp:235</a></div></div>
<div class="ttc" id="classColorSwatch_1_1Private_html_a80d15aede5b8ee246a5519b39c414377"><div class="ttname"><a href="classColorSwatch_1_1Private.html#a80d15aede5b8ee246a5519b39c414377">ColorSwatch::Private::mRawFile</a></div><div class="ttdeci">QString mRawFile</div><div class="ttdef"><b>Definition:</b> <a href="ColorSwatch_8cpp_source.html#l00026">ColorSwatch.cpp:26</a></div></div>
<div class="ttc" id="classColorSwatch_html_a5d9282cdf3f64edd007c7f6ac4bc62f9a7fc56270e7a70fa81a5935b72eacbe29"><div class="ttname"><a href="classColorSwatch.html#a5d9282cdf3f64edd007c7f6ac4bc62f9a7fc56270e7a70fa81a5935b72eacbe29">ColorSwatch::DATA::A</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="ColorSwatch_8cpp.html">ColorSwatch.cpp</a></li>
    <li class="footer">Generated on Wed Apr 29 2015 19:36:06 for CheckImgLinearity by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
